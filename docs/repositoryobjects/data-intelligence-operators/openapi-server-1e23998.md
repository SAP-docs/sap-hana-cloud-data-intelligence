<!-- loio1e239988f2f74934b245ac52e0e538ca -->

# OpenAPI Server

The OpenAPI server operator is a convenient server-side component that is suitable for providing services described in OpenAPI documentation or unspecified HTTP services. The component runs behind the web container of the hosting platform and inherits its security configuration. More concretely, this operator is configured to start its REST endpoint relative to the Pipeline engine's service path at `/openapi/service/basePath/.`



In regards to Authentication, it happens at the Data Intelligence level, before reaching the OpenAPI service endpoint.

By default, basic authentication is used \(user and password\), but other options, such as certificate-based are available as well.

More details can be found in the System Management Command-Line Client \(VCTL\) Reference documentation.

When a request matching the service path arrives, an output message is generated and sent to the connected operator. This operator supports both request-response and oneway message exchange patterns \(MEPs\). Currently, this choice must be configured per operator. When the operator is running in the request-response mode, the caller waits for the response up to the specified timeout. If the response message is returned to this operator over its port `ret`, it is returned to the caller. Otherwise, an error is returned to the caller.

Note that the service resides not at `/openapi/service/basePath` but within `/openapi/service/basePath`. In other words, a request to `/openapi/service/basePath` will return an HTTP 301 response redirecting to `/openapi/service/basePath/`.

The output message generated by this operator depends on whether it is configured as the plain mode \(for example, no OpenAPI document is associated\) or the OpenAPI-driven mode \(for example, an OpenAPI document is associated\). In the plain mode, the headers and body of the incoming message will be directly transferred to the output message. In contrast, in the OpenAPI-driven mode, the matching operation to the incoming message will be determined and the corresponding parameters for that operation will be extracted. Subsequently, these operation specific parameters will be transferred to the output message.

See [OpenAPI Client](openapi-client-8a70738.md) for the client-side operator.



<a name="loio1e239988f2f74934b245ac52e0e538ca__section_sq1_nf3_vdb"/>

## Configuration Parameters


<table>
<tr>
<th valign="top">

Name

</th>
<th valign="top">

ID

</th>
<th valign="top">

Type

</th>
<th valign="top">

Description

</th>
</tr>
<tr>
<td valign="top">

Base Path

</td>
<td valign="top">

basePath

</td>
<td valign="top">

string

</td>
<td valign="top">

The service's base path.

Default: /untitled

</td>
</tr>
<tr>
<td valign="top">

Timeout

</td>
<td valign="top">

timeout

</td>
<td valign="top">

int

</td>
<td valign="top">

The timeout value in milliseconds to wait for a response.

Default: 300000

</td>
</tr>
<tr>
<td valign="top">

One-Way

</td>
<td valign="top">

oneway

</td>
<td valign="top">

bool

</td>
<td valign="top">

If set to true, this operator does not wait for a response and returns an HTTP 204 immediately. If set to false, this operator waits for a response up to the timeout value.

Default: false

</td>
</tr>
<tr>
<td valign="top">

Swagger Specification

</td>
<td valign="top">

swaggerSpec

</td>
<td valign="top">

string

</td>
<td valign="top">

The optional OpenAPI document for this service endpoint. If this parameter is specified, a GET request to `/openapi/service/_basePath_/swagger.json` will return the OpenAPI spec document. \(Note that this \_basePath\_ value corresponds to the value of the above basePath parameter and not the value of the basePath property configured in the OpenAPI document.\)

Furthermore, the request message will be processed according to this OpenAPI document and the corresponding parameters will be extracted and injected into the output message. For the header names of the injected parameters, refer to the documentation for openapi.client.

All the operations declared in the OpenAPI document are accessible. If this parameter is not specified, the incoming messages are processed in the generic mode.

Default: ""

</td>
</tr>
<tr>
<td valign="top">

Web Socket

</td>
<td valign="top">

websocket

</td>
<td valign="top">

bool

</td>
<td valign="top">

If set to true, this operator's swaggersocket mode is enabled and the operator accepts requests over websocket and returns responses asynchronously.

Default: false

</td>
</tr>
<tr>
<td valign="top">

Max Concurrency

</td>
<td valign="top">

maxConcurrency

</td>
<td valign="top">

integer

</td>
<td valign="top">

The maximum number of concurrent requests that are handled per operator instance. If the message order must be preserved, set this value to 1.

Default: 8

</td>
</tr>
<tr>
<td valign="top">

Max Accepted

</td>
<td valign="top">

maxAccepted

</td>
<td valign="top">

integer

</td>
<td valign="top">

The maximum number of accepted requests at a time. Requests are accepted up to this number and being processed. If additional requests arrive while this number is reached, those requests are rejected.

Default: 128

</td>
</tr>
</table>



<a name="loio1e239988f2f74934b245ac52e0e538ca__section_ajg_pb3_xgb"/>

## Input


<table>
<tr>
<th valign="top">

Input

</th>
<th valign="top">

Type

</th>
<th valign="top">

Description

</th>
</tr>
<tr>
<td valign="top">

`ret` 

</td>
<td valign="top">

message

</td>
<td valign="top">

Return message produced by processing the request message in the pipeline. This message must contain the original request ID attribute `message.request.id` from the request message. The default HTTP status code of the resulting HTTP response is `200`, which can be overridden by setting attribute `openapi.status_code`. In addition, a technical error with HTTP `500` may be returned by setting attribute `message.response.error` with either an error text or the JSON representation of JavaScript error \(for example, `"my error"` or `{“message”:“my error”, “name”:“Error”}`\).

</td>
</tr>
</table>



<a name="loio1e239988f2f74934b245ac52e0e538ca__section_swc_cg3_vdb"/>

## Output


<table>
<tr>
<th valign="top">

Output

</th>
<th valign="top">

Type

</th>
<th valign="top">

Description

</th>
</tr>
<tr>
<td valign="top">

`out` 

</td>
<td valign="top">

message

</td>
<td valign="top">

Output message where parameters are set in the headers, and the optional content in body.

</td>
</tr>
</table>



<a name="loio1e239988f2f74934b245ac52e0e538ca__section_w13_ddp_nkb"/>

## Cross-Site Request Forgery Protection

HTTP requests using methods GET, HEAD and OPTIONS are not considered vulnerable to CSRF \(cross-site request forgery\) and therefore no CSRF protection is in place.

For all other HTTP methods CSRF protection is active and needs to be bypassed by one of two ways:

-   Set the HTTP header X-Requested-With to a non-empty value \(this is what an AJAX request would do without losing the ability to authenticate via session cookie\).

-   Authenticate with Authorization: Bearer <token\> header \(this is what a client library would likely use\).


**Related Information**  


[Swagger/OpenAPI](https://swagger.io/specification/v2/)

